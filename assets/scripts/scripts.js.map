{"version":3,"sources":["scripts.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","Constructor","TypeError","Object","defineProperty","value","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","_AsciiFactory","_AsciiFactory2","_CharacterSetFactory","_CharacterSetFactory2","_ImageFactory","_ImageFactory2","_CanvasService","_CanvasService2","App","options","_this","this","image","undefined","inputFileElement","inputFilePreviewElement","inputCharacterSetElement","inputSizeElement","inputLineHeightElement","characterSetRangeElement","btnPreset","btnStartElement","outputElement","exampleElements","addInputEventListeners","setCharacterSetFromPreset","getPresets","ascii","addEventListener","console","log","isValid","generateAscii","then","window","document","getElementById","contentWindow","displayInRows","_this2","previewImage","style","backgroundImage","src","parentNode","classList","add","handleFile","file","remove","getImageFromFile","err","files","stopPropagation","preventDefault","dataTransfer","_loop","charset","presets","LINE_HEIGHT","selectCharacterSet","_loop2","el","img","children","characterSet","join","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","character","indexOf","push","getCharacterSet","canvas","context","getContext","lightnessRangeCount","maxLightnessCount","characterLightnessSet","normalizeCharacterLightness","getCharacterLightnessSet","FONT_SIZE","sort","b","lightness","forEach","lightnessString","Math","floor","toString","max","height","width","clearRect","strokeStyle","x","moveTo","lineTo","stroke","_this3","Promise","resolve","reject","getCanvasFromImage","imageData","getImageData","imageLightnessData","getImageLightnessData","data","normalizeLightness","worker","Worker","onmessage","postMessage","getAscii","emoji","latin","Array","concat","html","replace","isNaN","parseInt","parseFloat","./factories/AsciiFactory","./factories/CharacterSetFactory","./factories/ImageFactory","./services/CanvasService","2","AsciiFactory","find","match","abs","3","CharacterSetFactory","start","end","String","fromCodePoint","4","ImageFactory","reader","FileReader","Image","result","readAsDataURL","5","CanvasService","createElement","round","fillStyle","fillRect","drawImage","fontSize","fontStyle","fillText","getCanvasLightness","filter","lightnessData","forEachPixel","g","sum","previous","current","reduce","callback","pixelData","lightnessMin","Infinity","lightnessMax","min","map"],"mappings":"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","file":"scripts.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _AsciiFactory = require('./factories/AsciiFactory');\n\nvar _AsciiFactory2 = _interopRequireDefault(_AsciiFactory);\n\nvar _CharacterSetFactory = require('./factories/CharacterSetFactory');\n\nvar _CharacterSetFactory2 = _interopRequireDefault(_CharacterSetFactory);\n\nvar _ImageFactory = require('./factories/ImageFactory');\n\nvar _ImageFactory2 = _interopRequireDefault(_ImageFactory);\n\nvar _CanvasService = require('./services/CanvasService');\n\nvar _CanvasService2 = _interopRequireDefault(_CanvasService);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar App = function () {\n    function App(options) {\n        var _this = this;\n\n        _classCallCheck(this, App);\n\n        this.image = undefined;\n\n        this.inputFileElement = options.inputFileElement;\n        this.inputFilePreviewElement = options.inputFilePreviewElement;\n        this.inputCharacterSetElement = options.inputCharacterSetElement;\n        this.inputSizeElement = options.inputSizeElement;\n        this.inputLineHeightElement = options.inputLineHeightElement;\n        this.characterSetRangeElement = options.characterSetRangeElement;\n        this.btnPreset = options.btnPreset;\n        this.btnStartElement = options.btnStartElement;\n        this.outputElement = options.outputElement;\n        this.exampleElements = options.exampleElements;\n\n        this.addInputEventListeners();\n        this.setCharacterSetFromPreset(this.getPresets().ascii);\n\n        this.btnStartElement.addEventListener('click', function () {\n            console.log(\"Generate\");\n            if (!_this.isValid()) return;\n\n            _this.generateAscii(_this.image).then(function (ascii) {\n                window.document.getElementById(\"account-page\").contentWindow.displayInRows(ascii);\n                // this.outputElement.innerHTML = this.escapeHtml(ascii);\n            });\n        });\n    }\n\n    _createClass(App, [{\n        key: 'addInputEventListeners',\n        value: function addInputEventListeners() {\n            var _this2 = this;\n\n            var previewImage = function previewImage(image) {\n                _this2.inputFilePreviewElement.style.backgroundImage = 'url(' + image.src + ')';\n                _this2.inputFilePreviewElement.parentNode.classList.add('file-uploader--preview');\n            };\n            var handleFile = function handleFile(file) {\n                _this2.inputFileElement.parentNode.classList.remove('form__control--error');\n\n                _ImageFactory2.default.getImageFromFile(file).then(function (image) {\n                    previewImage(image);\n                    _this2.image = image;\n                }).catch(function (err) {\n                    _this2.image = undefined;\n                });\n            };\n\n            this.inputFileElement.addEventListener('change', function () {\n                if (!_this2.inputFileElement.files.length) return;\n                handleFile(_this2.inputFileElement.files[0]);\n            });\n\n            // Enable dropping files\n            this.inputFileElement.parentNode.addEventListener('dragover', function (e) {\n                e.stopPropagation();\n                e.preventDefault();\n                _this2.inputFileElement.parentNode.classList.add('file-uploader--highlight');\n            });\n            this.inputFileElement.parentNode.addEventListener('dragleave', function (e) {\n                e.stopPropagation();\n                e.preventDefault();\n                _this2.inputFileElement.parentNode.classList.remove('file-uploader--highlight');\n            });\n            this.inputFileElement.parentNode.addEventListener('drop', function (e) {\n                e.stopPropagation();\n                e.preventDefault();\n                handleFile(e.dataTransfer.files[0]);\n                _this2.inputFileElement.parentNode.classList.remove('file-uploader--highlight');\n            });\n\n            this.inputCharacterSetElement.addEventListener('change', function () {\n                _this2.inputCharacterSetElement.classList.remove('form__control--error');\n            });\n\n            this.inputCharacterSetElement.addEventListener('change', function () {\n                _this2.inputCharacterSetElement.classList.remove('form__control--error');\n            });\n\n            var _loop = function _loop(charset) {\n                _this2.btnPreset[charset].addEventListener('click', function () {\n                    var presets = _this2.getPresets();\n                    _this2.setCharacterSetFromPreset(presets[charset]);\n                    _this2.inputLineHeightElement.value = App.LINE_HEIGHT[charset];\n                });\n            };\n\n            for (var charset in this.btnPreset) {\n                _loop(charset);\n            }\n\n            this.inputCharacterSetElement.addEventListener('change', function () {\n                return _this2.selectCharacterSet();\n            });\n            this.inputCharacterSetElement.addEventListener('keyup', function () {\n                return _this2.selectCharacterSet();\n            });\n\n            var _loop2 = function _loop2(el) {\n                if (_this2.exampleElements[el]) {\n                    console.log(el);\n                    console.log(_this2.exampleElements[el]);\n\n                    _this2.exampleElements[el].addEventListener('click', function () {\n                        var img = _this2.exampleElements[el].children[0];\n                        console.log(img.src);\n                        previewImage(img);\n                        _this2.image = img;\n                    });\n                }\n            };\n\n            for (var el = 0; el < this.exampleElements.length; el++) {\n                _loop2(el);\n            }\n        }\n    }, {\n        key: 'setCharacterSetFromPreset',\n        value: function setCharacterSetFromPreset(characterSet) {\n            this.inputCharacterSetElement.value = characterSet.join('');\n            this.selectCharacterSet();\n        }\n    }, {\n        key: 'getCharacterSet',\n        value: function getCharacterSet() {\n            var characterSet = [];\n\n            var _iteratorNormalCompletion = true;\n            var _didIteratorError = false;\n            var _iteratorError = undefined;\n\n            try {\n                for (var _iterator = this.inputCharacterSetElement.value[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                    var character = _step.value;\n\n                    if (characterSet.indexOf(character) >= 0) continue;\n                    characterSet.push(character);\n                }\n            } catch (err) {\n                _didIteratorError = true;\n                _iteratorError = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion && _iterator.return) {\n                        _iterator.return();\n                    }\n                } finally {\n                    if (_didIteratorError) {\n                        throw _iteratorError;\n                    }\n                }\n            }\n\n            return characterSet;\n        }\n    }, {\n        key: 'selectCharacterSet',\n        value: function selectCharacterSet() {\n            var characterSet = this.getCharacterSet(),\n                canvas = this.characterSetRangeElement,\n                context = canvas.getContext('2d'),\n                lightnessRangeCount = {};\n            var maxLightnessCount = 0;\n\n            this.characterLightnessSet = _CanvasService2.default.normalizeCharacterLightness(_CanvasService2.default.getCharacterLightnessSet(characterSet, App.FONT_SIZE));\n            this.characterLightnessSet = this.characterLightnessSet.sort(function (a, b) {\n                return b.lightness - a.lightness;\n            });\n\n            this.characterLightnessSet.forEach(function (character) {\n                var lightnessString = Math.floor(character.lightness * characterSet.length).toString();\n\n                if (!lightnessRangeCount[lightnessString]) {\n                    lightnessRangeCount[lightnessString] = 0;\n                }\n\n                lightnessRangeCount[lightnessString]++;\n                maxLightnessCount = Math.max(lightnessRangeCount[lightnessString], maxLightnessCount);\n            });\n\n            canvas.height = 25;\n            canvas.width = characterSet.length;\n\n            context.clearRect(0, 0, canvas.width, canvas.height);\n            context.strokeStyle = 'rgba(0, 0, 0, .5)';\n\n            for (var x in lightnessRangeCount) {\n                context.moveTo(x, canvas.height);\n                context.lineTo(x, canvas.height - lightnessRangeCount[x] / maxLightnessCount * canvas.height);\n            }\n\n            context.stroke();\n        }\n    }, {\n        key: 'generateAscii',\n        value: function generateAscii(image) {\n            var _this3 = this;\n\n            return new Promise(function (resolve, reject) {\n                var width = _this3.inputSizeElement.value,\n                    height = width / image.width * image.height / _this3.inputLineHeightElement.value,\n                    canvas = _CanvasService2.default.getCanvasFromImage(image, width, height),\n                    context = canvas.getContext('2d'),\n                    imageData = context.getImageData(0, 0, canvas.width, canvas.height),\n                    imageLightnessData = _CanvasService2.default.getImageLightnessData(imageData);\n\n                imageLightnessData.data = _CanvasService2.default.normalizeLightness(imageLightnessData.data);\n\n                if ('Worker' in window) {\n                    var worker = new Worker('assets/scripts/ascii-factory.js');\n                    worker.onmessage = function (e) {\n                        return resolve(e.data);\n                    };\n                    worker.postMessage({\n                        characterLightnessSet: _this3.characterLightnessSet,\n                        imageLightnessData: imageLightnessData\n                    });\n                } else {\n                    resolve(_AsciiFactory2.default.getAscii(_this3.characterLightnessSet, imageLightnessData));\n                }\n            });\n        }\n    }, {\n        key: 'getPresets',\n        value: function getPresets() {\n            return {\n                ascii: [\"_\", \"o\"],\n\n                // TODO: Add more emoji\n                // Source: https://en.wikipedia.org/wiki/Emoji#In_the_Unicode_standard\n                emoji: _CharacterSetFactory2.default.getCharacterSet(0x1F600, 0x1F64F),\n                latin: Array.prototype.concat(_CharacterSetFactory2.default.getCharacterSet(0x20, 0x7E), _CharacterSetFactory2.default.getCharacterSet(0xA1, 0x17F))\n            };\n        }\n    }, {\n        key: 'escapeHtml',\n        value: function escapeHtml(html) {\n            return html.replace(/&/g, '&amp;').replace(/\"/g, '&quot;').replace(/'/g, '&#39;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n        }\n    }, {\n        key: 'isValid',\n        value: function isValid() {\n            var isValid = true;\n\n            if (!this.image) {\n                this.inputFileElement.parentNode.classList.add('form__control--error');\n                isValid = false;\n            }\n\n            if (!this.inputCharacterSetElement.value) {\n                this.inputCharacterSetElement.classList.add('form__control--error');\n                isValid = false;\n            }\n\n            if (isNaN(parseInt(this.inputSizeElement.value)) || this.inputSizeElement.value < 2) {\n                this.inputSizeElement.classList.add('form__control--error');\n                isValid = false;\n            }\n\n            if (isNaN(parseFloat(this.inputLineHeightElement.value))) {\n                this.inputLineHeightElement.classList.add('form__control--error');\n                isValid = false;\n            }\n\n            return isValid;\n        }\n    }]);\n\n    return App;\n}();\n\nexports.default = App;\n\n\nApp.FONT_SIZE = 12;\nApp.LINE_HEIGHT = {\n    ascii: 10,\n    latin: 1.8,\n    emoji: 1.2\n};\n\nwindow.App = App;\n\n},{\"./factories/AsciiFactory\":2,\"./factories/CharacterSetFactory\":3,\"./factories/ImageFactory\":4,\"./services/CanvasService\":5}],2:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar AsciiFactory = function () {\n    function AsciiFactory() {\n        _classCallCheck(this, AsciiFactory);\n    }\n\n    _createClass(AsciiFactory, null, [{\n        key: 'getAscii',\n        value: function getAscii(characterLightnessSet, imageLightnessData) {\n            var ascii = '',\n                find = function find(lightness) {\n                var match = void 0;\n\n                characterLightnessSet.forEach(function (character) {\n                    if (match && Math.abs(lightness - character.lightness) >= Math.abs(lightness - match.lightness)) return;\n\n                    match = character;\n                });\n\n                return match.character;\n            };\n\n            imageLightnessData.data.forEach(function (lightness, i) {\n                if (i > 0 && i % imageLightnessData.width === 0) {\n                    ascii += '\\r\\n';\n                }\n\n                ascii += find(lightness);\n            });\n\n            return ascii;\n        }\n    }]);\n\n    return AsciiFactory;\n}();\n\nexports.default = AsciiFactory;\n\n},{}],3:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar CharacterSetFactory = function () {\n    function CharacterSetFactory() {\n        _classCallCheck(this, CharacterSetFactory);\n    }\n\n    _createClass(CharacterSetFactory, null, [{\n        key: \"getCharacterSet\",\n        value: function getCharacterSet(start, end) {\n            var characterSet = [];\n\n            for (var i = start; i <= end; i++) {\n                characterSet.push(String.fromCodePoint(i));\n            }\n\n            return characterSet;\n        }\n    }]);\n\n    return CharacterSetFactory;\n}();\n\nexports.default = CharacterSetFactory;\n\n},{}],4:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar ImageFactory = function () {\n    function ImageFactory() {\n        _classCallCheck(this, ImageFactory);\n    }\n\n    _createClass(ImageFactory, null, [{\n        key: 'getImageFromFile',\n        value: function getImageFromFile(file) {\n            var reader = new FileReader(),\n                image = new Image();\n\n            return new Promise(function (resolve, reject) {\n                reader.addEventListener('load', function () {\n                    image.src = reader.result;\n                });\n\n                image.addEventListener('load', function () {\n                    resolve(image);\n                });\n\n                reader.addEventListener('error', reject);\n                image.addEventListener('error', reject);\n                reader.readAsDataURL(file);\n            });\n        }\n    }]);\n\n    return ImageFactory;\n}();\n\nexports.default = ImageFactory;\n\n},{}],5:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar CanvasService = function () {\n    function CanvasService() {\n        _classCallCheck(this, CanvasService);\n    }\n\n    _createClass(CanvasService, null, [{\n        key: 'getCanvasFromImage',\n        value: function getCanvasFromImage(image, width, height) {\n            var canvas = document.createElement('canvas'),\n                context = canvas.getContext('2d');\n\n            canvas.height = Math.round(height);\n            canvas.width = Math.round(width);\n\n            context.fillStyle = '#fff';\n            context.fillRect(0, 0, canvas.width, canvas.height);\n            context.drawImage(image, 0, 0, canvas.width, canvas.height);\n\n            return canvas;\n        }\n    }, {\n        key: 'getCharacterLightnessSet',\n        value: function getCharacterLightnessSet(characterSet, fontSize) {\n            var canvas = document.createElement('canvas'),\n                context = canvas.getContext('2d'),\n                characterLightnessSet = [];\n\n            canvas.height = fontSize;\n            canvas.width = fontSize;\n\n            context.fontStyle = fontSize + 'px monospace';\n\n            characterSet.forEach(function (character) {\n                context.fillStyle = '#fff';\n                context.fillRect(0, 0, canvas.width, canvas.height);\n\n                context.fillStyle = '#000';\n                context.fillText(character, 0, canvas.height);\n\n                var imageData = context.getImageData(0, 0, canvas.width, canvas.height);\n                characterLightnessSet.push({\n                    character: character,\n                    lightness: CanvasService.getCanvasLightness(imageData)\n                });\n            });\n\n            return characterLightnessSet.filter(function (character) {\n                return character.lightness > 0 || character.character === 0x20;\n            });\n        }\n    }, {\n        key: 'getImageLightnessData',\n        value: function getImageLightnessData(imageData) {\n            var lightnessData = [];\n\n            CanvasService.forEachPixel(imageData, function (r, g, b, a) {\n                lightnessData.push((r + g + b) / 3);\n            });\n\n            return {\n                data: lightnessData,\n                height: imageData.height,\n                width: imageData.width\n            };\n        }\n    }, {\n        key: 'getCanvasLightness',\n        value: function getCanvasLightness(imageData) {\n            var imageLightnessData = CanvasService.getImageLightnessData(imageData),\n                sum = function sum(previous, current) {\n                return previous + current;\n            };\n\n            return imageLightnessData.data.reduce(sum, 0) / imageLightnessData.data.length;\n        }\n    }, {\n        key: 'forEachPixel',\n        value: function forEachPixel(imageData, callback) {\n            var pixelData = imageData.data;\n\n            for (var i = 0; i < pixelData.length; i += 4) {\n                callback(pixelData[i], pixelData[i + 1], pixelData[i + 2], pixelData[i + 3], i);\n            }\n        }\n    }, {\n        key: 'normalizeCharacterLightness',\n        value: function normalizeCharacterLightness(lightnessData) {\n            var lightnessMin = Infinity,\n                lightnessMax = -Infinity;\n\n            lightnessData.forEach(function (obj) {\n                lightnessMin = Math.min(obj.lightness, lightnessMin);\n                lightnessMax = Math.max(obj.lightness, lightnessMax);\n            });\n\n            return lightnessData.map(function (obj) {\n                obj.lightness = (obj.lightness - lightnessMin) / (lightnessMax - lightnessMin);\n                return obj;\n            });\n        }\n    }, {\n        key: 'normalizeLightness',\n        value: function normalizeLightness(lightnessData) {\n            var lightnessMin = Infinity,\n                lightnessMax = -Infinity;\n\n            lightnessData.forEach(function (lightness) {\n                lightnessMin = Math.min(lightness, lightnessMin);\n                lightnessMax = Math.max(lightness, lightnessMax);\n            });\n\n            return lightnessData.map(function (lightness) {\n                return (lightness - lightnessMin) / (lightnessMax - lightnessMin);\n            });\n        }\n    }]);\n\n    return CanvasService;\n}();\n\nexports.default = CanvasService;\n\n},{}]},{},[1]);\n"]}